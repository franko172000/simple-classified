(self.webpackChunk=self.webpackChunk||[]).push([[838],{28838:(t,s,e)=>{"use strict";e.r(s),e.d(s,{default:()=>o});var i=e(87757),n=e.n(i),a=e(50703);function r(t,s,e,i,n,a,r){try{var l=t[a](r),c=l.value}catch(t){return void e(t)}l.done?s(c):Promise.resolve(c).then(i,n)}function l(t){return function(){var s=this,e=arguments;return new Promise((function(i,n){var a=t.apply(s,e);function l(t){r(a,i,n,l,c,"next",t)}function c(t){r(a,i,n,l,c,"throw",t)}l(void 0)}))}}const c={data:function(){return{listings:[]}},computed:{getListings:function(){return this.listings}},methods:{loadListings:function(){var t=this;return l(n().mark((function s(){return n().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:(0,a.OF)().then((function(s){t.listings=s.data.data}));case 1:case"end":return s.stop()}}),s)})))()},changeStatus:function(t,s){var e=this,i=t.target.checked?"online":"offline",n=this.listings.indexOf(s);s.status=i,this.listings.splice(n,1,s),(0,a.ms)(s.id,i).then((function(t){e.$notification.success({message:"Status updated"})}))},deleteUserListing:function(t){var s=this;this.$modal.confirm({title:"Delete listing?",confirmLoading:!0,onOk:function(){return l(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,a.SG)(t.id).then((function(e){var i=s.listings.indexOf(t);s.listings.splice(i,1),s.$notification.success({message:"Listing deleted"})}));case 1:case"end":return e.stop()}}),e)})))()}})}},created:function(){this.loadListings()}};const o=(0,e(51900).Z)(c,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("banner",{staticClass:"inner-banner",attrs:{showHomeButton:!0}},[e("h1",[t._v("My Listings")])]),t._v(" "),e("div",{staticClass:"h-100 w-full flex items-center justify-center bg-teal-lightest"},[e("div",{staticClass:"bg-white p-6 m-4 w-full lg:w-2/4 "},t._l(t.getListings,(function(s,i){return e("div",{key:i,staticClass:"bg-white w-full my-3 border-2 border-gray-300 p-5 rounded-md tracking-wide shadow-lg bottom-border-style"},[e("div",{staticClass:"flex",attrs:{id:"header"}},[e("img",{staticClass:"w-auto h-44 rounded-md border-2 border-gray-300",attrs:{alt:"mountain",src:s.images[0].photo}}),t._v(" "),e("div",{staticClass:"flex flex-col ml-5",attrs:{id:"body"}},[e("h4",{staticClass:"text-xl font-semibold mb-2",attrs:{id:"name"}},[t._v(t._s(s.title))]),t._v(" "),e("p",{staticClass:"text-gray-800 mt-2",attrs:{id:"job"}},[t._v(t._s(s.excerpt))]),t._v(" "),e("div",{staticClass:"flex mt-5"},[e("span",{staticClass:"mr-3 text-primary"},[e("router-link",{attrs:{to:{name:"edit-listing",params:{slug:s.slug}}}},[e("i",{staticClass:"fas fa-edit mx-1"}),t._v("Edit")])],1),t._v(" "),e("span",{staticClass:"mx-3 text-red-600"},[e("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.deleteUserListing(s)}}},[e("i",{staticClass:"fas fa-trash mx-1"}),t._v("Delete")])])]),t._v(" "),e("div",{staticClass:"flex mt-5"},[e("label",{staticClass:"switch"},[e("input",{attrs:{type:"checkbox"},domProps:{checked:"offline"!==s.status},on:{click:function(e){return t.changeStatus(e,s)}}}),t._v(" "),e("span",{staticClass:"slider round"})]),t._v(" "),e("span",{staticClass:"ml-2"},[t._v(t._s("offline"===s.status?"Offline":"Published"))])])])])])})),0)])],1)}),[],!1,null,null,null).exports}}]);