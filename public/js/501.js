(self.webpackChunk=self.webpackChunk||[]).push([[501],{70501:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var s=r(87757),a=r.n(s),o=r(20629),i=r(10642),n=r(50703);function c(e,t,r,s,a,o,i){try{var n=e[o](i),c=n.value}catch(e){return void r(e)}n.done?t(c):Promise.resolve(c).then(s,a)}function l(e){return function(){var t=this,r=arguments;return new Promise((function(s,a){var o=e.apply(t,r);function i(e){c(o,s,a,i,n,"next",e)}function n(e){c(o,s,a,i,n,"throw",e)}i(void 0)}))}}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const d={data:function(){return{uploadProgress:!1,images:[],categories:[],locations:[],currencies:[{name:"Naira",code:"NGN"},{name:"US Dollars",code:"USD"}],form:this.$form.createForm(this)}},computed:m(m({},(0,o.rn)(["tmpPhotos"])),{},{getLocations:function(){return this.locations},getCategories:function(){return this.categories}}),methods:{checkFile:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/webp"===e.type;t||this.$notification.error({message:"You can only upload JPG & PNG file!"});var r=e.size/1024/1024<2;return r||this.$notification.error({message:"Image must smaller than 2MB!"}),t&&r},triggerClick:function(){this.$refs.filePic.click()},onSelectedPhoto:function(e){var t=e.target.files[0];if(!this.checkFile(t))return!1;this.imgSrc=URL.createObjectURL(e.target.files[0]);var r=new FormData;r.append("photo",this.$refs.filePic.files[0]),this.$store.dispatch("tmpPhotos/processPhoto",{payload:r})},removeImage:function(e){var t=this;this.$modal.confirm({title:"Delete image?",onOk:function(){return l(a().mark((function r(){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t.$store.dispatch("tmpPhotos/deletePhoto",{payload:e});case 1:case"end":return r.stop()}}),r)})))()}})},uploadPost:function(){var e=this;return l(a().mark((function t(){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e,e.form.validateFields(function(){var e=l(a().mark((function e(t,s){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=7;break}if(0!==r.$store.state.tmpPhotos.listingPhotos.length){e.next=4;break}return r.$notification.error({message:"You must upload atleast one image"}),e.abrupt("return");case 4:r.uploadProgress=!0,s.images=r.$store.state.tmpPhotos.listingPhotos,(0,n.nA)(s).then((function(e){r.$notification.success({message:"Ad was posted successfully!"}),r.uploadProgress=!1,r.$store.dispatch("tmpPhotos/removeTempImages"),r.form.resetFields(),r.$router.push("/user/my-listings")}));case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;(0,i.JC)().then((function(t){e.locations=t.data.data})),(0,i.tG)().then((function(t){e.categories=t.data.data}))}};const f=(0,r(51900).Z)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("banner",{staticClass:"inner-banner",attrs:{showHomeButton:!0}},[r("h1",[e._v("Post New Ad")])]),e._v(" "),r("div",{staticClass:"h-100 w-full flex items-center justify-center bg-teal-lightest"},[r("div",{staticClass:"bg-white rounded shadow p-6 m-4 w-full lg:w-2/4 border-gray-300 border bottom-border-style"},[r("a-form",{attrs:{form:e.form},on:{submit:function(t){return t.preventDefault(),e.uploadPost(t)}}},[r("div",[r("a-form-item",{attrs:{label:"Post title"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"Please enter post title"}]}],expression:"['title',{rules: [{ required: true, message: 'Please enter post title' }] }]"}],attrs:{placeholder:"Enter your post title",name:"title",size:"large"}})],1),e._v(" "),r("a-form-item",{attrs:{label:"Excerpt"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["excerpt",{rules:[{required:!0,message:"Please enter excerpt"}]}],expression:"['excerpt',{rules: [{ required: true, message: 'Please enter excerpt' }] }]"}],attrs:{rows:"5",type:"textarea"}})],1),e._v(" "),r("a-form-item",{attrs:{label:"Description"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["description",{rules:[{required:!0,message:"Please enter description"}]}],expression:"['description',{rules: [{ required: true, message: 'Please enter description' }] }]"}],attrs:{rows:"10",type:"textarea"}})],1),e._v(" "),r("a-form-item",{attrs:{label:"Ad Photo"}},[r("a-button",{attrs:{htmlType:"button",loading:e.tmpPhotos.uploadImgProgress},on:{click:function(t){return t.preventDefault(),e.triggerClick(t)}}},[r("a-icon",{attrs:{type:"upload"}}),e._v("Click to select photo\n                          ")],1),e._v(" "),e._l(e.tmpPhotos.listingPhotos,(function(t,s){return r("div",{key:s,staticClass:"flex"},[r("div",{staticClass:"bg-white w-2/4 flex items-center p-2 rounded shadow border m-1"},[r("div",{staticClass:"flex items-center space-x-4"},[r("img",{staticClass:"w-16 h-16 rounded-xl",attrs:{src:t.photo,alt:"My profile"}})]),e._v(" "),r("div",{staticClass:"flex-grow p-3"},[r("div",{staticClass:"text-sm text-gray-500"},[e._v("\n                                    img.filename\n                                  ")])]),e._v(" "),r("div",{staticClass:"p-2"},[r("button",{on:{click:function(r){return e.removeImage(t)}}},[r("i",{staticClass:"fas fa-trash"})])])])])}))],2),e._v(" "),r("div",{staticClass:"col-2-grid"},[r("a-form-item",{attrs:{label:"Price"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["price",{rules:[{required:!0,message:"Please enter price"}]}],expression:"['price',{rules: [{ required: true, message: 'Please enter price' }] }]"}],attrs:{placeholder:"Enter price",name:"price",size:"large"}})],1),e._v(" "),r("a-form-item",{attrs:{label:"Currency"}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["currency",{rules:[{required:!0,message:"Please select currency"}]}],expression:"['currency',{rules: [{ required: true, message: 'Please select currency' }] }]"}],attrs:{size:"large"}},e._l(e.currencies,(function(t,s){return r("a-select-option",{key:s,attrs:{value:t.code}},[e._v("\n                                    "+e._s(t.name)+"\n                                ")])})),1)],1)],1),e._v(" "),r("div",{staticClass:"col-2-grid"},[r("a-form-item",{attrs:{label:"Category"}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["category",{rules:[{required:!0,message:"Please select category"}]}],expression:"['category',{rules: [{ required: true, message: 'Please select category' }] }]"}],attrs:{size:"large"}},e._l(e.getCategories,(function(t,s){return r("a-select-option",{key:s,attrs:{value:t.id}},[e._v("\n                                    "+e._s(t.name)+"\n                                ")])})),1)],1),e._v(" "),r("a-form-item",{attrs:{label:"Location"}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["location",{rules:[{required:!0,message:"Please select location"}]}],expression:"['location',{rules: [{ required: true, message: 'Please select location' }] }]"}],attrs:{size:"large"}},e._l(e.getLocations,(function(t,s){return r("a-select-option",{key:s,attrs:{value:t.code}},[e._v("\n                                    "+e._s(t.name)+"\n                                ")])})),1)],1)],1),e._v(" "),r("a-button",{staticClass:"text-center w-100",attrs:{type:"primary",size:"large",loading:e.uploadProgress,htmlType:"submit"}},[r("strong",[e._v("Submit")])])],1)]),e._v(" "),r("form",[r("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"filePic",attrs:{type:"file",name:"profile_photo"},on:{change:e.onSelectedPhoto}})])],1)])],1)}),[],!1,null,null,null).exports}}]);